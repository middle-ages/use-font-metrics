var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&o(e,r,t[r]);if(n)for(var r of n(t))i.call(t,r)&&o(e,r,t[r]);return e};import{_ as c,d as f,e as l,f as m,h as p,i as u,P as d,j as h,C as y,k as w,l as b,p as v}from"./vendor.745ff060.js";const x=e=>t=>t[e],P=e=>t=>{const[{fontSize:r,text:n},{unitsPerEm:a}]=[t,e],{advanceWidth:i,bbox:o}=e.layout(n),{minX:m,maxX:p}=o,u=c.flow(f.multiply(r),f.divide(a)),d=o.width,h=-1*m,y=i-d-m;return s(s({},t),c.pipe({advanceWidth:i,width:d,minX:m,maxX:p,advanceLeft:h,advanceRight:y},l(u)))},g=e=>e["OS/2"],O=(e,t=1.5)=>{const{lineGap:r,unitsPerEm:n}=e,{winDescent:a,winAscent:i}=g(e);return(t*n+i+r-a)/2},j=(e,t=1.5)=>{const{unitsPerEm:r}=e,{typoAscender:n,typoLineGap:a,typoDescender:i}=g(e);return(t*r+n+a+i)/2},F=class{constructor(...e){this.cache=new Map,this.get=e=>{if(void 0===e)throw new Error("Requested font but family name is undefined.");const t=this.cache.get(e);if(void 0===t)throw new Error(`No font found for family name “${e}”. `+(this.cache.size?`These families have been loaded: ${this.families.map((e=>`“${e}”`)).join(", ")}`:"No font families have been loaded."));return t.font},this.measure=e=>c.pipe(e.fontFamily,this.get,P)(e),this.computeBaseline=(e,t,r=!1,n=1.5)=>{const a=this.get(e),i=(r?j:O)(a,n);return t/a.unitsPerEm*i},e.forEach((e=>{this.cache.set(e.fontFamily,e)}))}get fonts(){return Array.from(this.cache.values())}get families(){return c.pipe("fontFamily",x,m)(this.fonts)}};let E=F;E.fromPromise=async e=>new F(...await e),E.from=(...e)=>new F(...e);const A=async e=>{const n=await fetch(e.src),a=await n.blob(),i=await(async e=>new Promise((function(t,r){const n=new FileReader;n.onload=()=>t(u.Buffer.from(n.result)),n.onerror=r,n.readAsArrayBuffer(e)})))(a),o=p.create(i);return c=s({},e),t(c,r({font:o}));var c},S=new d,z=e=>e.replace(/^url\("?/,"").replace(/"?\)$/,""),B=e=>e.replaceAll('"',""),I=e=>["src"===e.name?"src":"fontFamily",c.pipe(e.value.text,"src"===e.name?z:B)],X=({cssText:e})=>{const t=(e=>{var t;return null==(t=S.parse(e).rules[0].rulelist)?void 0:t.rules})(e);return void 0===t?[]:[c.pipe(t,h.map(I),Object.fromEntries)]},$=e=>5===e.type,C=e=>c.pipe(e.rules,Array.from,h.filter($),h.chain(X)),D=e=>c.pipe(window.document.styleSheets,Array.from,h.chain(C),h.map(A),Promise.all.bind(Promise),E.fromPromise).then(e),L=y.exports.createContext(E.from()),R=()=>y.exports.useContext(L),G=(e,t,r=!1,n=1.5)=>R().computeBaseline(e,t,r,n),N=e=>{const{text:t,fontFamily:r,fontSize:n,width:a,advanceLeft:i}=R().measure(e);return{text:t,fontFamily:r,fontSize:n,width:a,textIndent:i}},T=(e,t=1.5)=>{const r=N(e),{fontSize:n,fontFamily:a,width:i,textIndent:o}=r;return[s({fontFamily:a,height:w(t),lineHeight:w(t)},b(v)({width:i,fontSize:n,textIndent:o})),R().measure(e)]};export{L as F,T as a,N as b,G as c,R as u,D as w};
